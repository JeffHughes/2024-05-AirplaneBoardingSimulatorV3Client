<div class="messages">
  Current Boarding Group:
  {{ boardingLetter(timelineService.currentBoardingGroup()) }},
  {{ timelineService.message() }}
</div>

<div class="time-display" style="position: absolute; top: 5px; right: 5px">
  <!-- {{ timelineService.sliderValueAnalog }}
  {{ timelineService.sliderValue() }}% -->
  {{ getSecs(timelineService.currentTime()) }}m
  {{ timelineService.currentTime() % 60 }}s
</div>

<div class="grid-container">
  <div class="gate">
    <div class="waiting">seating area</div>
    <div class="lanes">
      <div style="position: absolute; padding: 5px">Gate</div>
      <div style="display: flex; flex-direction: column; height: 100%">
        @for (lane of [1,2]; track $index) {
        <div style="flex: 1; display: flex">
          @for (bin of config.bins().reverse(); track $index) {
          <div
            [id]="'GateLane-' + lane + '-' + bin"
            style="
              height: 100%;
              aspect-ratio: 1;
              border: 1px solid black;
              user-select: none;

              display: flex;
              justify-content: center;
              align-items: center;
            "
            [ngStyle]="gateLaneStyle(bin, 0.2)"
          >
            <!-- {{ lane == 1 ? "Left" : "Right" }}- -->

            {{ bin }} >
          </div>
          }
        </div>
        }
      </div>
    </div>
    <div class="pass-check">x</div>
  </div>
  <div class="walkway">
    <div style="position: absolute; padding: 5px; top: 0px">Walkway</div>
    @for (spot of config.walkway().reverse(); track $index) {
    <div
      [id]="'Walkway-' + spot"
      style="
        flex: 1;
        display: flex;
        aspect-ratio: 1;

        align-items: center;
        justify-content: center;

        border: 1px solid black;
        user-select: none;
      "
    >
      &lt; {{ spot }}
    </div>
    }
  </div>
  <div class="cabin">
    <div style="position: absolute; padding: 5px; top: -13px">Cabin</div>
    <div
      style="display: flex; flex-direction: column; height: 100%; width: 100%"
    >
      <div style="text-align: center">
        <table style="width: 100%">
          <tr>
            @for (row of config.rows( ) ; track $index) {
            <td style="text-align: right" [ngStyle]="rowStyle(row, 0.1)">
              <div [id]="'row-' + row">{{ row }}</div>
            </td>
            }
          </tr>
          @for (letter of config.seatsABC(); track $index) {
          <tr>
            @for (row of config.rows( ) ; track $index) {
            <td [ngStyle]="config.seatStyle()">
              <div
                style="
                  border: 1px solid black;
                  user-select: none;
                  text-align: left;
                  vertical-align: top;
                  height: 25px;
                "
                [id]="'seat-' + row + letter"
                [ngStyle]="rowStyle(row, 0.1)"
              >
                {{ row }}{{ letter }}
              </div>
            </td>
            }
            <td></td>
          </tr>
          }
        </table>
      </div>

      <div style="display: flex">
        @for (bin of config.bins().reverse(); track $index) {
        <div
          [id]="'cabin-bin-aft-' + bin"
          style="
            flex: 1;
            display: flex;
            height: 30px;

            align-items: center;
            justify-content: center;

            border: 1px solid black;
            user-select: none;
          "
          [ngStyle]="getStyle(bin, 0.4)"
        >
          {{ bin }}
        </div>
        }
      </div>

      <div style="display: flex">
        @for (bin of config.bins().reverse() ; track $index) {
        <div
          [id]="'Cabin-' + bin"
          style="
            flex: 1;
            display: flex;
            height: 80px;

            opacity: .2;

            align-items: center;
            justify-content: center;

            border: 1px solid rgba(0, 0, 0, 0.1);
            user-select: none;
          "
          [ngStyle]="getStyle(bin, 1)"
        >
          {{ bin }} >
        </div>
        }
      </div>

      <div style="display: flex">
        @for (bin of config.bins().reverse(); track $index) {
        <div
          [id]="'cabin-bin-starboard-' + bin"
          style="
            flex: 1;
            display: flex;
            height: 30px;

            align-items: center;
            justify-content: center;

            border: 1px solid black;
            user-select: none;
          "
          [ngStyle]="getStyle(bin, 0.4)"
        >
          {{ bin }}
        </div>
        }
      </div>

      <div style="text-align: center">
        <table style="width: 100%">
          @for (letter of config.seatsDEF(); track $index) {
          <tr>
            @for (row of config.rows( ) ; track $index) {
            <td [ngStyle]="config.seatStyle()">
              <div
                style="
                  border: 1px solid black;
                  user-select: none;
                  text-align: left;
                  vertical-align: top;
                  height: 25px;
                "
                [ngStyle]="rowStyle(row, 0.1)"
                [id]="'seat-' + row + letter"
              >
                {{ row }}{{ letter }}
              </div>
            </td>
            }
            <td></td>
          </tr>
          }
        </table>
      </div>
    </div>
  </div>
  <div class="g2w">
    <!-- <div class="g2w-circle-container">
      <svg viewBox="0 0 100 50">
        <path
          d="M 0,50 A 50,50 0 0 1 100,50"
          fill="transparent"
          stroke="gray"
          stroke-width="6"
          stroke-dasharray="5,5"
          id="half-circle"
        ></path>
      </svg>
    </div> -->

    <svg
      xmlns="http://www.w3.org/2000/svg"
      xml:space="preserve"
      width="100%"
      height="100%"
      version="1.1"
      viewBox="0 0 900.28 4860.28"
    >
      <g>
        <path
          id="motionPath1"
          class="fil0 str0"
          d="M23.47 696.81c289.54,83.67 579.06,167.33 719.28,691.09 140.21,523.76 131.11,1487.62 -9.11,2001.34 -140.21,513.72 -411.54,577.31 -682.86,640.9"
        />
        <path
          id="motionPath2"
          class="fil0 str0"
          d="M56.81 1625.38c225.98,59.61 451.95,119.22 561.39,492.41 109.43,373.18 102.33,1059.93 -7.11,1425.95 -109.44,366.02 -321.2,411.33 -532.97,456.64"
        />
      </g>
    </svg>
  </div>
  <div class="w2c">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xml:space="preserve"
      width="100%"
      height="100%"
      version="1.1"
      viewBox="0 0 900.28 6356.95"
    >
      <g>
        <path
          id="motionPath3"
          fill="transparent"
          stroke="lightblue"
          stroke-width="6"
          stroke-dasharray="5,5"
          d="M876.81 380.14c-289.54,102.07 -579.06,204.15 -719.28,843.14 -140.21,638.99 -131.11,1814.89 9.11,2441.64 140.21,626.74 411.54,704.32 682.86,781.89"
        />
      </g>
    </svg>
  </div>
</div>

<!-- remove display none when not using devTools -->
<div class="controls" style="padding-left: 15px; display: none">
  <div class="playPause" style="width: 50px">
    <button
      [ngStyle]="{
        'background-color': 1 ? 'lightblue' : 'white'
      }"
      (click)="setSpeed(0)"
    >
      Play
    </button>
    <!-- <button
      [ngStyle]="{
        'background-color': 1 ? 'lightblue' : 'white'
      }"
      (click)="setSpeed(0)"
    >
      Pause
    </button> -->
  </div>
  <div style="width: 100%; text-align: center">
    <input
      type="range"
      min="0"
      max="100"
      [(ngModel)]="timelineService.sliderValueAnalog"
      (input)="updateTime($event)"
      class="slider"
    />
  </div>

  <div class="speed-controls" style="width: 300px">
    <button
      *ngFor="let speed of speeds"
      [ngStyle]="{
        'background-color': speed === currentSpeed() ? 'lightblue' : 'white'
      }"
      (click)="setSpeed(speed)"
    >
      {{ speed }}x
    </button>
  </div>
</div>

@for (passenger of config.passengers() ; track $index) {
<div
  [id]="'passenger-moving-independently-' + passenger.id"
  style="
    width: 20px;
    height: 15px;

    top: 500px;
    left: 100px;

    position: absolute;

    opacity: 0;

    background-color: rgb(39, 185, 26);
    border: 1px solid black;

    text-align: center;
    vertical-align: center;
    border-radius: 100%;

    padding: 5px;
    padding-top: 6px;

    font-size: 12px;
  "
  [ngStyle]="rowPassengerStyle(passenger.id, 0.5)"
>
  {{ passenger.id }}
</div>

} @for (family of config.families() ; track $index) {
<div
  [id]="'family-' + family.familyID"
  style="
    top: 50px;
    left: 80px;

    position: absolute;

    opacity: 0;

    border: 1px solid rgba(0, 0, 0, 0.377);

    text-align: center;
    vertical-align: center;
    border-radius: 5px;

    padding: 1px;
    padding-top: 6px;

    font-size: 12px;

    display: flex;
    flex-direction: column;

    flex-wrap: wrap;

    max-height: 100px;
  "
>
  @for (passenger of family.familyMembers ; track $index) {
  <div
    [id]="'Passenger-moving-w-family-' + passenger.passengerID"
    style="
      width: 20px;
      height: 15px;

      background-color: rgba(233, 233, 233, 1);
      border: 1px solid black;

      text-align: center;
      vertical-align: center;
      border-radius: 100%;

      padding: 5px;
      padding-top: 6px;

      font-size: 12px;

      will-change: left, top;
    "
    [ngStyle]="getStyle(family.boardingOrder)"
  >
    {{ passenger.passengerID }}
  </div>

  }

  {{ boardingLetter(family.boardingGroup) }}{{ family.boardingOrder }}
</div>

}
